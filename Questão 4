#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
#include <math.h>
#include <string.h>
#include <conio.h> 

char Arte[23][23];
void menuini(); // Orlando
void menurot(); // 
void ScanArte(); // JP
void hor90(int R1); // Tobias FEITO
void ant90(int R2); // Tobias FEITO
void EspVert(int EV); // Orlando FEITO 
void EspHori(int EH); // Orlando FEITO

void LeitorTXT(); // JP - Bonus FEITO
void hor90()
	{
		
		int i=0,j=0,linha=0,coluna=22;		
		char novo[23][23];

		for(linha=0,j=23;j>=0;j--,linha++)
		{
		
			for (coluna=0,i=0;i<23;i++,coluna++)
			{
				novo[coluna][linha]=Arte[j][i];
			}
		}	
		for(i=0;i<23;i++)
		{
			for(j=0;j<23;j++)
				{
					printf("%c ",novo[i][j]);
				}
				printf("\n");
		}		
		
	}
void ant90()
	{

		int i=0,j=0,linha=0,coluna=23;		
		char novo[23][23];

		for(linha=0,j=22;j>=0;j--,linha++)
		{
		
			for (coluna=0,i=0;i<23;i++,coluna++)
			{
				novo[linha][coluna]=Arte[i][j];
			}
		}	
		for(i=0;i<23;i++)
		{
			for(j=0;j<23;j++)
				{
					printf("%c ",novo[i][j]);
				}
				printf("\n");
		}		
	}
int main() 
{
	setlocale (LC_ALL, "");
	menuini();
	return 0;
}

void ScanArte() // Função que pede ao usuário que digite a arte e a imprime.
{
	char art[23][23];
	
	for(int i=0; i<23;i++)
		for(int j=0; j<23; j++){
			printf("Digite o caractere da casa [%d][%d]: ", i, j);
			scanf("%c", &art[i][j]);}

	int i=0;
	while(i<23){
		for(int j=0; j<23; j++){
	 		printf("%c", &art[i][j]);
			if(art[i][j] = '\n' || j==23)
	 	   	i++;}
	}
	menurot();
}

void LeitorTXT()
{
	FILE *file; //Define um ponteiro do tipo FILE
	file = fopen("Casa.txt", "r"); //Abre o arquivo Casa.txt (o arquivo deve estar no mesmo diretório que o exe)
				       //"r" significa "read", usado na função "fopen" para ler arquivos
	
	if(file == NULL){ //Se o ponteiro não apontar para nada, ou seja, se o nome digitado for diferente do nome do arquivo, printa que é inválido.
		printf("Arquivo inválido.\n");
	}
	
	char arquivo[529];
	while((fgets(arquivo, 529, file)) != NULL){ //Imprime até que encontre um espaço vazio (NULL), daí para o print.
		printf("%s", arquivo);
	}
	
	fclose(file);
	menurot();
}

void menuini()
{
	int opcao;
	printf("\n------------------Selecione o modo de enviar a Scan Art II------------------");
	printf("\n 1 - Digitar o arquivo manualmente no formato [23][23].");
	printf("\n 2 - Enviar um arquivo no format .txt ");	
	printf("\n 0 - Sair \n");
	printf("\n\nDigite a opção desejada: ");
	scanf("%d",&opcao);
	switch(opcao)
	{
		case 1:
			{
				ScanArte();
			}
			break;
		case 2:
			{
				LeitorTXT();
			}
			break;
		default: 
			{
				printf("\nOpção não encontrada! Digite novamente!");
				void menu();
			}
	}
}

void menurot()
{
	int opcao,R1,R2,EV,EH;
	printf("\n------------------Menu de Transformações------------------");
	printf("\n 1 - Rotacione a imagem em 90° no sentido horário.");
	printf("\n 2 - Rotacione a imagem em 90° no sentido anti-horário. ");
	printf("\n 3 - Aplique espelhamentos verticais na imagem. ");	
	printf("\n 4 - Aplique espelhamentos horizontais na imagem. ");	
	printf("\n 0 - Sair \n");
	printf("\n\nDigite a opção desejada: ");
	scanf("%d",&opcao);
	switch(opcao)
	{
		case 1:
			{
				printf("\nQuantas rotações deseja fazer? ");
				scanf("%d",&R1);
				hor90(R1);
			}
			break;
		case 2:
			{
				printf("\nQuantas rotações deseja fazer? ");
				scanf("%d",&R2);
				ant90(R2);
			}
			break;
		case 3:
			{
				printf("\nQuantos espelhamentos deseja fazer? ");
				scanf("%d",&EV);
				EspVert(EV);
			}
			break;
		case 4:
			{
				printf("\nQuantos espelhamentos deseja fazer? ");
				scanf("%d",&EH);
				EspHori(EH);
			}
			break;
		default: 
			{
				printf("\nOpção não encontrada! Digite novamente!");
				void menurot();
			}
	}
}

void EspVert(int EV)
{
	int ctEV=0;
	int i,j,linha,coluna,aux;
	for(ctEV=0; ctEV<EV;ctEV++)
	{
				
		for(coluna=0,j=0;j<23;j++,coluna++)
		{
		
			for (linha=0,i=(23-1);i>=(23/2);i--,linha++)
			{
				aux = Arte[linha][coluna];
				Arte[linha][coluna]=Arte[i][j];
				Arte[i][j] = aux;
			}
		}	
		for(i=0;i<23;i++)
		{
			for(j=0;j<23;j++)
				{
					printf("%d ",Arte[i][j]);
				}
				printf("\n");
		}		
	}
	
	printf("\n \n");
		
		int resp;
		printf("Deseja aplicar outra transformação? Digite 1 para sim e 2 para não!\n");
		scanf("%d", &resp);
		if(resp == 1)
		{
			menurot();
		}
		else if(resp == 2)
			exit(0);	
}

void EspHori(int EH)
{
	int ctEH=0;
	int i,j,linha,coluna,aux;
	for(ctEH=0; ctEH<EH;ctEH++)
	{
		for(linha=0,i=0;i<23;i++,linha++)
		{
		
			for (coluna=0,j=(23-1);j>=(23/2);j--,coluna++)
			{
				aux = Arte[linha][coluna];
				Arte[linha][coluna]=Arte[i][j];
				Arte[i][j] = aux;
			}
		}	
	
		for(i=0;i<23;i++)
		{
			for(j=0;j<23;j++)
				{
					printf("%d ",Arte[i][j]);
				}
				printf("\n");
		}
	}
	printf("\n \n");
		
		int resp;
		printf("Deseja aplicar outra transformação? Digite 1 para sim e 2 para não!\n");
		scanf("%d", &resp);
		if(resp == 1)
		{
			menurot();
		}
		else if(resp == 2)
			exit(0);
}
