#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
#include <math.h>
#include <string.h>
#include <conio.h> 

int JdV[3][3]; //inicializada no int main
int checarinput(int aux1, int aux2); //feito
int checarlinha(); // feito
int checarcoluna(); // feito
int checardiagonal_principal(); // feito
int checardiagonal_secundaria(); // feito
int empate(); //feito
void rodada(int numero_jogador); //feito
int tabuleiro(); //feito

int numero_jogador;
int main() 
{
	setlocale (LC_ALL, "");
	int JdV[3][3] = {0,0,0,0,0,0};  /* matrix que recebera o jogo da velha no formato padrão 
3x3, note que a matriz já está sendo inicializada*/
	system("cls");
	printf("Jogo da Velha!\n");
	rodada(1);
	return 0;
}

int empate()
{
	int ctEmpate=0,linha,coluna;
	for(linha =0; linha<3; linha++)
	{
		for(coluna = 0; coluna<3; coluna++)
		{
			if(JdV[linha][coluna]!=0)
			{
				ctEmpate++;
			}
		}
	}
	if((linha*coluna) == ctEmpate) return 1;
	else return 0;
}

int tabuleiro()
{
	printf("\nTabuleiro:\n");
	for(int linha = 0; linha<3;linha++)
		{
		for(int coluna=0; coluna<3;coluna++)
			{
				printf("%d ", JdV[linha][coluna]);
			}
			printf("\n");
		}
	checarlinha();
	checarcoluna();
	checardiagonal_principal();
	checardiagonal_secundaria();
	empate();
	int numero_jogador;
	if(numero_jogador==1) return 2;
	if(numero_jogador==2) return 1;
}

void rodada(int numero_jogador)
{
	int aux1, aux2;
	if(numero_jogador== 1)
	{
		printf("\nPrimeiro Jogador:");
	}
	
	if(numero_jogador == 2)
	{
		printf("\nSegundo Jogador:");
	}
	scanf("%d %d",&aux1, &aux2);
	if(checarinput(aux1,aux2) == 1)
	{
		printf("\nPosição Inválida!\nTente novamente!");
		rodada(numero_jogador);
	}
	else tabuleiro();
}

int checarinput(int aux1, int aux2)
{
	if (JdV[aux1][aux2]==0) return 0;
	else return 1;
}

int checarlinha()
{
	if(numero_jogador ==1)
	{
		for(int linha =0; linha<3; linha++)
			{
				if( JdV[linha][0] == 1 && JdV[linha][1] ==1 && JdV[linha][2]==1)
				{
					printf("Parabéns! Primeiro jogador ganhou!");
					return 1;
				}
			}
	}
	
	if(numero_jogador ==2)
	{
		for(int linha =0; linha<3; linha++)
			{
				if( JdV[linha][0] == 2 && JdV[linha][1] ==2 && JdV[linha][2]==2)
				{
					printf("Parabéns! Segundo jogador ganhou!");
					return 1;
				}
			}
	}
	return 0;
}

int checarcoluna()
{
	if(numero_jogador ==1)
	{
		for(int coluna =0; coluna<3; coluna++)
			{
				if( JdV[0][coluna] == 1 && JdV[1][coluna] ==1 && JdV[1][coluna]==1)
				{
					printf("Parabéns! Primeiro jogador ganhou!");
					return 1;
				}
			}
	}
	
	if(numero_jogador ==2)
	{
		for(int coluna =0; coluna<3; coluna++)
			{
				if( JdV[0][coluna] == 2 && JdV[1][coluna] ==2 && JdV[2][coluna]==2)
				{
					printf("Parabéns! Segundo jogador ganhou!");
					return 1;
				}
			}
	}
	return 0;
}

int checardiagonal_principal()
{
	int ct_diagonal;
	if(numero_jogador ==1)
	{
		ct_diagonal = 0;
		for(int linha=0, int coluna = 0; linha < 3; linha++, coluna++ )
		{
			if(JdV[linha][coluna] == 1) ct_diagonal++;
		}
		if(ct_diagonal == 3) 
		{
			printf("Parabéns! Primeiro jogador ganhou!");
			return 1;
		}
		else return 0;
	}
	if(numero_jogador ==2)
	{
		ct_diagonal = 0;
		for(int linha=0, int coluna = 0; linha < 3; linha++, coluna++ )
		{
			if(JdV[linha][coluna] == 2) ct_diagonal++;
		}
		if(ct_diagonal == 3) 
		{
			printf("Parabéns! Segundo jogador ganhou!");
			return 1;
		}
		else return 0;
	}
}

int checardiagonal_secundaria()
{
	int ct_diagonal;
	if(numero_jogador ==1)
	{
		ct_diagonal = 0;
		for(int linha=3, int coluna = 3; linha >0; --linha, -coluna )
		{
			if(JdV[linha][coluna] == 1) ct_diagonal++;
		}
		if(ct_diagonal == 3) 
		{
			printf("Parabéns! Primeiro jogador ganhou!");
			return 1;
		}
		else return 0;
	}
	if(numero_jogador ==2)
	{
		ct_diagonal = 0;
		for(int linha=3, int coluna = 3; linha >0; --linha, -coluna )
		{
			if(JdV[linha][coluna] == 2) ct_diagonal++;
		}
		if(ct_diagonal == 3) 
		{
			printf("Parabéns! Segundo jogador ganhou!");
			return 1;
		}
		else return 0;
	}
}
